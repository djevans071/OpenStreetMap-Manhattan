<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8" />
      <title>report</title>
      <style>.markdown-preview:not([data-use-github-style]) { padding: 2em; font-size: 1.2em; color: rgb(56, 58, 66); overflow: auto; background-color: rgb(250, 250, 250); }
.markdown-preview:not([data-use-github-style]) > :first-child { margin-top: 0px; }
.markdown-preview:not([data-use-github-style]) h1, .markdown-preview:not([data-use-github-style]) h2, .markdown-preview:not([data-use-github-style]) h3, .markdown-preview:not([data-use-github-style]) h4, .markdown-preview:not([data-use-github-style]) h5, .markdown-preview:not([data-use-github-style]) h6 { line-height: 1.2; margin-top: 1.5em; margin-bottom: 0.5em; color: rgb(0, 0, 0); }
.markdown-preview:not([data-use-github-style]) h1 { font-size: 2.4em; font-weight: 300; }
.markdown-preview:not([data-use-github-style]) h2 { font-size: 1.8em; font-weight: 400; }
.markdown-preview:not([data-use-github-style]) h3 { font-size: 1.5em; font-weight: 500; }
.markdown-preview:not([data-use-github-style]) h4 { font-size: 1.2em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) h5 { font-size: 1.1em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) h6 { font-size: 1em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) strong { color: rgb(0, 0, 0); }
.markdown-preview:not([data-use-github-style]) del { color: rgb(94, 97, 110); }
.markdown-preview:not([data-use-github-style]) a, .markdown-preview:not([data-use-github-style]) a code { color: rgb(82, 111, 255); }
.markdown-preview:not([data-use-github-style]) img { max-width: 100%; }
.markdown-preview:not([data-use-github-style]) > p { margin-top: 0px; margin-bottom: 1.5em; }
.markdown-preview:not([data-use-github-style]) > ul, .markdown-preview:not([data-use-github-style]) > ol { margin-bottom: 1.5em; }
.markdown-preview:not([data-use-github-style]) blockquote { margin: 1.5em 0px; font-size: inherit; color: rgb(94, 97, 110); border-color: rgb(209, 209, 210); border-width: 4px; }
.markdown-preview:not([data-use-github-style]) hr { margin: 3em 0px; border-top: 2px dashed rgb(209, 209, 210); background: none; }
.markdown-preview:not([data-use-github-style]) table { margin: 1.5em 0px; }
.markdown-preview:not([data-use-github-style]) th { color: rgb(0, 0, 0); }
.markdown-preview:not([data-use-github-style]) th, .markdown-preview:not([data-use-github-style]) td { padding: 0.66em 1em; border: 1px solid rgb(209, 209, 210); }
.markdown-preview:not([data-use-github-style]) code { color: rgb(0, 0, 0); background-color: rgb(234, 234, 235); }
.markdown-preview:not([data-use-github-style]) pre.editor-colors { margin: 1.5em 0px; padding: 1em; font-size: 0.92em; border-radius: 3px; background-color: rgb(240, 240, 240); }
.markdown-preview:not([data-use-github-style]) kbd { color: rgb(0, 0, 0); border-width: 1px 1px 2px; border-style: solid; border-color: rgb(209, 209, 210) rgb(209, 209, 210) rgb(193, 193, 194); background-color: rgb(234, 234, 235); }
.markdown-preview[data-use-github-style] { font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif; line-height: 1.6; word-wrap: break-word; padding: 30px; font-size: 16px; color: rgb(51, 51, 51); overflow: scroll; background-color: rgb(255, 255, 255); }
.markdown-preview[data-use-github-style] > :first-child { margin-top: 0px !important; }
.markdown-preview[data-use-github-style] > :last-child { margin-bottom: 0px !important; }
.markdown-preview[data-use-github-style] a:not([href]) { color: inherit; text-decoration: none; }
.markdown-preview[data-use-github-style] .absent { color: rgb(204, 0, 0); }
.markdown-preview[data-use-github-style] .anchor { position: absolute; top: 0px; left: 0px; display: block; padding-right: 6px; padding-left: 30px; margin-left: -30px; }
.markdown-preview[data-use-github-style] .anchor:focus { outline: none; }
.markdown-preview[data-use-github-style] h1, .markdown-preview[data-use-github-style] h2, .markdown-preview[data-use-github-style] h3, .markdown-preview[data-use-github-style] h4, .markdown-preview[data-use-github-style] h5, .markdown-preview[data-use-github-style] h6 { position: relative; margin-top: 1em; margin-bottom: 16px; font-weight: bold; line-height: 1.4; }
.markdown-preview[data-use-github-style] h1 .octicon-link, .markdown-preview[data-use-github-style] h2 .octicon-link, .markdown-preview[data-use-github-style] h3 .octicon-link, .markdown-preview[data-use-github-style] h4 .octicon-link, .markdown-preview[data-use-github-style] h5 .octicon-link, .markdown-preview[data-use-github-style] h6 .octicon-link { display: none; color: rgb(0, 0, 0); vertical-align: middle; }
.markdown-preview[data-use-github-style] h1:hover .anchor, .markdown-preview[data-use-github-style] h2:hover .anchor, .markdown-preview[data-use-github-style] h3:hover .anchor, .markdown-preview[data-use-github-style] h4:hover .anchor, .markdown-preview[data-use-github-style] h5:hover .anchor, .markdown-preview[data-use-github-style] h6:hover .anchor { padding-left: 8px; margin-left: -30px; text-decoration: none; }
.markdown-preview[data-use-github-style] h1:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h2:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h3:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h4:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h5:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h6:hover .anchor .octicon-link { display: inline-block; }
.markdown-preview[data-use-github-style] h1 tt, .markdown-preview[data-use-github-style] h2 tt, .markdown-preview[data-use-github-style] h3 tt, .markdown-preview[data-use-github-style] h4 tt, .markdown-preview[data-use-github-style] h5 tt, .markdown-preview[data-use-github-style] h6 tt, .markdown-preview[data-use-github-style] h1 code, .markdown-preview[data-use-github-style] h2 code, .markdown-preview[data-use-github-style] h3 code, .markdown-preview[data-use-github-style] h4 code, .markdown-preview[data-use-github-style] h5 code, .markdown-preview[data-use-github-style] h6 code { font-size: inherit; }
.markdown-preview[data-use-github-style] h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom: 1px solid rgb(238, 238, 238); }
.markdown-preview[data-use-github-style] h1 .anchor { line-height: 1; }
.markdown-preview[data-use-github-style] h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom: 1px solid rgb(238, 238, 238); }
.markdown-preview[data-use-github-style] h2 .anchor { line-height: 1; }
.markdown-preview[data-use-github-style] h3 { font-size: 1.5em; line-height: 1.43; }
.markdown-preview[data-use-github-style] h3 .anchor { line-height: 1.2; }
.markdown-preview[data-use-github-style] h4 { font-size: 1.25em; }
.markdown-preview[data-use-github-style] h4 .anchor { line-height: 1.2; }
.markdown-preview[data-use-github-style] h5 { font-size: 1em; }
.markdown-preview[data-use-github-style] h5 .anchor { line-height: 1.1; }
.markdown-preview[data-use-github-style] h6 { font-size: 1em; color: rgb(119, 119, 119); }
.markdown-preview[data-use-github-style] h6 .anchor { line-height: 1.1; }
.markdown-preview[data-use-github-style] p, .markdown-preview[data-use-github-style] blockquote, .markdown-preview[data-use-github-style] ul, .markdown-preview[data-use-github-style] ol, .markdown-preview[data-use-github-style] dl, .markdown-preview[data-use-github-style] table, .markdown-preview[data-use-github-style] pre { margin-top: 0px; margin-bottom: 16px; }
.markdown-preview[data-use-github-style] hr { height: 4px; padding: 0px; margin: 16px 0px; border: 0px none; background-color: rgb(231, 231, 231); }
.markdown-preview[data-use-github-style] ul, .markdown-preview[data-use-github-style] ol { padding-left: 2em; }
.markdown-preview[data-use-github-style] ul.no-list, .markdown-preview[data-use-github-style] ol.no-list { padding: 0px; list-style-type: none; }
.markdown-preview[data-use-github-style] ul ul, .markdown-preview[data-use-github-style] ul ol, .markdown-preview[data-use-github-style] ol ol, .markdown-preview[data-use-github-style] ol ul { margin-top: 0px; margin-bottom: 0px; }
.markdown-preview[data-use-github-style] li > p { margin-top: 16px; }
.markdown-preview[data-use-github-style] dl { padding: 0px; }
.markdown-preview[data-use-github-style] dl dt { padding: 0px; margin-top: 16px; font-size: 1em; font-style: italic; font-weight: bold; }
.markdown-preview[data-use-github-style] dl dd { padding: 0px 16px; margin-bottom: 16px; }
.markdown-preview[data-use-github-style] blockquote { padding: 0px 15px; color: rgb(119, 119, 119); border-left: 4px solid rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] blockquote > :first-child { margin-top: 0px; }
.markdown-preview[data-use-github-style] blockquote > :last-child { margin-bottom: 0px; }
.markdown-preview[data-use-github-style] table { display: block; width: 100%; overflow: auto; word-break: keep-all; }
.markdown-preview[data-use-github-style] table th { font-weight: bold; }
.markdown-preview[data-use-github-style] table th, .markdown-preview[data-use-github-style] table td { padding: 6px 13px; border: 1px solid rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] table tr { border-top: 1px solid rgb(204, 204, 204); background-color: rgb(255, 255, 255); }
.markdown-preview[data-use-github-style] table tr:nth-child(2n) { background-color: rgb(248, 248, 248); }
.markdown-preview[data-use-github-style] img { max-width: 100%; box-sizing: border-box; }
.markdown-preview[data-use-github-style] .emoji { max-width: none; }
.markdown-preview[data-use-github-style] span.frame { display: block; overflow: hidden; }
.markdown-preview[data-use-github-style] span.frame > span { display: block; float: left; width: auto; padding: 7px; margin: 13px 0px 0px; overflow: hidden; border: 1px solid rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] span.frame span img { display: block; float: left; }
.markdown-preview[data-use-github-style] span.frame span span { display: block; padding: 5px 0px 0px; clear: both; color: rgb(51, 51, 51); }
.markdown-preview[data-use-github-style] span.align-center { display: block; overflow: hidden; clear: both; }
.markdown-preview[data-use-github-style] span.align-center > span { display: block; margin: 13px auto 0px; overflow: hidden; text-align: center; }
.markdown-preview[data-use-github-style] span.align-center span img { margin: 0px auto; text-align: center; }
.markdown-preview[data-use-github-style] span.align-right { display: block; overflow: hidden; clear: both; }
.markdown-preview[data-use-github-style] span.align-right > span { display: block; margin: 13px 0px 0px; overflow: hidden; text-align: right; }
.markdown-preview[data-use-github-style] span.align-right span img { margin: 0px; text-align: right; }
.markdown-preview[data-use-github-style] span.float-left { display: block; float: left; margin-right: 13px; overflow: hidden; }
.markdown-preview[data-use-github-style] span.float-left span { margin: 13px 0px 0px; }
.markdown-preview[data-use-github-style] span.float-right { display: block; float: right; margin-left: 13px; overflow: hidden; }
.markdown-preview[data-use-github-style] span.float-right > span { display: block; margin: 13px auto 0px; overflow: hidden; text-align: right; }
.markdown-preview[data-use-github-style] code, .markdown-preview[data-use-github-style] tt { padding: 0.2em 0px; margin: 0px; font-size: 85%; border-radius: 3px; background-color: rgba(0, 0, 0, 0.0392157); }
.markdown-preview[data-use-github-style] code::before, .markdown-preview[data-use-github-style] tt::before, .markdown-preview[data-use-github-style] code::after, .markdown-preview[data-use-github-style] tt::after { letter-spacing: -0.2em; content: "Â "; }
.markdown-preview[data-use-github-style] code br, .markdown-preview[data-use-github-style] tt br { display: none; }
.markdown-preview[data-use-github-style] del code { text-decoration: inherit; }
.markdown-preview[data-use-github-style] pre > code { padding: 0px; margin: 0px; font-size: 100%; word-break: normal; white-space: pre; border: 0px; background: transparent; }
.markdown-preview[data-use-github-style] .highlight { margin-bottom: 16px; }
.markdown-preview[data-use-github-style] .highlight pre, .markdown-preview[data-use-github-style] pre { padding: 16px; overflow: auto; font-size: 85%; line-height: 1.45; border-radius: 3px; background-color: rgb(247, 247, 247); }
.markdown-preview[data-use-github-style] .highlight pre { margin-bottom: 0px; word-break: normal; }
.markdown-preview[data-use-github-style] pre { word-wrap: normal; }
.markdown-preview[data-use-github-style] pre code, .markdown-preview[data-use-github-style] pre tt { display: inline; max-width: initial; padding: 0px; margin: 0px; overflow: initial; line-height: inherit; word-wrap: normal; border: 0px; background-color: transparent; }
.markdown-preview[data-use-github-style] pre code::before, .markdown-preview[data-use-github-style] pre tt::before, .markdown-preview[data-use-github-style] pre code::after, .markdown-preview[data-use-github-style] pre tt::after { content: normal; }
.markdown-preview[data-use-github-style] kbd { display: inline-block; padding: 3px 5px; font-size: 11px; line-height: 10px; color: rgb(85, 85, 85); vertical-align: middle; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(204, 204, 204) rgb(187, 187, 187); border-radius: 3px; box-shadow: rgb(187, 187, 187) 0px -1px 0px inset; background-color: rgb(252, 252, 252); }
.markdown-preview[data-use-github-style] a { color: rgb(51, 122, 183); }
.markdown-preview[data-use-github-style] code { color: inherit; }
.markdown-preview[data-use-github-style] pre.editor-colors { padding: 0.8em 1em; margin-bottom: 1em; font-size: 0.85em; border-radius: 4px; overflow: auto; }
.scrollbars-visible-always .markdown-preview pre.editor-colors::shadow .vertical-scrollbar, .scrollbars-visible-always .markdown-preview pre.editor-colors::shadow .horizontal-scrollbar { visibility: hidden; }
.scrollbars-visible-always .markdown-preview pre.editor-colors:hover::shadow .vertical-scrollbar, .scrollbars-visible-always .markdown-preview pre.editor-colors:hover::shadow .horizontal-scrollbar { visibility: visible; }
.markdown-preview .task-list-item-checkbox { position: absolute; margin: 0.25em 0px 0px -1.4em; }
.bracket-matcher .region {
  border-bottom: 1px dotted lime;
  position: absolute;
}

.spell-check-misspelling .region {
  border-bottom: 2px dotted rgba(255, 51, 51, 0.75);
}
.spell-check-corrections {
  width: 25em !important;
}

pre.editor-colors,
.host {
  background-color: #fafafa;
  color: #383a42;
}
pre.editor-colors .line.cursor-line,
.host .line.cursor-line {
  background-color: rgba(56, 58, 66, 0.05);
}
pre.editor-colors .invisible,
.host .invisible {
  color: #383a42;
}
pre.editor-colors .cursor,
.host .cursor {
  border-left: 2px solid #526fff;
}
pre.editor-colors .selection .region,
.host .selection .region {
  background-color: #e5e5e6;
}
pre.editor-colors .bracket-matcher .region,
.host .bracket-matcher .region {
  border-bottom: 1px solid #526fff;
  box-sizing: border-box;
}
pre.editor-colors .invisible-character,
.host .invisible-character {
  color: rgba(56, 58, 66, 0.2);
}
pre.editor-colors .indent-guide,
.host .indent-guide {
  color: rgba(56, 58, 66, 0.2);
}
pre.editor-colors .wrap-guide,
.host .wrap-guide {
  background-color: rgba(56, 58, 66, 0.2);
}
pre.editor-colors .find-result .region.region.region,
.host .find-result .region.region.region,
pre.editor-colors .current-result .region.region.region,
.host .current-result .region.region.region {
  border-radius: 2px;
  background-color: rgba(82, 111, 255, 0.2);
  transition: border-color 0.4s;
}
pre.editor-colors .find-result .region.region.region,
.host .find-result .region.region.region {
  border: 2px solid transparent;
}
pre.editor-colors .current-result .region.region.region,
.host .current-result .region.region.region {
  border: 2px solid #526fff;
  transition-duration: .1s;
}
pre.editor-colors .gutter .line-number,
.host .gutter .line-number {
  color: #9d9d9f;
  -webkit-font-smoothing: antialiased;
}
pre.editor-colors .gutter .line-number.cursor-line,
.host .gutter .line-number.cursor-line {
  color: #383a42;
  background-color: #f2f2f2;
}
pre.editor-colors .gutter .line-number.cursor-line-no-selection,
.host .gutter .line-number.cursor-line-no-selection {
  background-color: transparent;
}
pre.editor-colors .gutter .line-number .icon-right,
.host .gutter .line-number .icon-right {
  color: #383a42;
}
pre.editor-colors .gutter:not(.git-diff-icon) .line-number.git-line-removed.git-line-removed::before,
.host .gutter:not(.git-diff-icon) .line-number.git-line-removed.git-line-removed::before {
  bottom: -3px;
}
pre.editor-colors .gutter:not(.git-diff-icon) .line-number.git-line-removed::after,
.host .gutter:not(.git-diff-icon) .line-number.git-line-removed::after {
  content: "";
  position: absolute;
  left: 0px;
  bottom: 0px;
  width: 25px;
  border-bottom: 1px dotted rgba(255, 20, 20, 0.5);
  pointer-events: none;
}
pre.editor-colors .gutter .line-number.folded,
.host .gutter .line-number.folded,
pre.editor-colors .gutter .line-number:after,
.host .gutter .line-number:after,
pre.editor-colors .fold-marker:after,
.host .fold-marker:after {
  color: #383a42;
}
.comment {
  color: #a0a1a7;
  font-style: italic;
}
.comment .markup.link {
  color: #a0a1a7;
}
.entity.name.type {
  color: #c18401;
}
.entity.other.inherited-class {
  color: #50a14f;
}
.keyword {
  color: #a626a4;
}
.keyword.control {
  color: #a626a4;
}
.keyword.operator {
  color: #383a42;
}
.keyword.other.special-method {
  color: #4078f2;
}
.keyword.other.unit {
  color: #986801;
}
.storage {
  color: #a626a4;
}
.storage.type.annotation,
.storage.type.primitive {
  color: #a626a4;
}
.storage.modifier.package,
.storage.modifier.import {
  color: #383a42;
}
.constant {
  color: #986801;
}
.constant.variable {
  color: #986801;
}
.constant.character.escape {
  color: #0184bc;
}
.constant.numeric {
  color: #986801;
}
.constant.other.color {
  color: #0184bc;
}
.constant.other.symbol {
  color: #0184bc;
}
.variable {
  color: #e45649;
}
.variable.interpolation {
  color: #ca1243;
}
.variable.parameter {
  color: #383a42;
}
.string {
  color: #50a14f;
}
.string.regexp {
  color: #0184bc;
}
.string.regexp .source.ruby.embedded {
  color: #c18401;
}
.string.other.link {
  color: #e45649;
}
.punctuation.definition.comment {
  color: #a0a1a7;
}
.punctuation.definition.method-parameters,
.punctuation.definition.function-parameters,
.punctuation.definition.parameters,
.punctuation.definition.separator,
.punctuation.definition.seperator,
.punctuation.definition.array {
  color: #383a42;
}
.punctuation.definition.heading,
.punctuation.definition.identity {
  color: #4078f2;
}
.punctuation.definition.bold {
  color: #c18401;
  font-weight: bold;
}
.punctuation.definition.italic {
  color: #a626a4;
  font-style: italic;
}
.punctuation.section.embedded {
  color: #ca1243;
}
.punctuation.section.method,
.punctuation.section.class,
.punctuation.section.inner-class {
  color: #383a42;
}
.support.class {
  color: #c18401;
}
.support.type {
  color: #0184bc;
}
.support.function {
  color: #0184bc;
}
.support.function.any-method {
  color: #4078f2;
}
.entity.name.function {
  color: #4078f2;
}
.entity.name.class,
.entity.name.type.class {
  color: #c18401;
}
.entity.name.section {
  color: #4078f2;
}
.entity.name.tag {
  color: #e45649;
}
.entity.other.attribute-name {
  color: #986801;
}
.entity.other.attribute-name.id {
  color: #4078f2;
}
.meta.class {
  color: #c18401;
}
.meta.class.body {
  color: #383a42;
}
.meta.method-call,
.meta.method {
  color: #383a42;
}
.meta.definition.variable {
  color: #e45649;
}
.meta.link {
  color: #986801;
}
.meta.require {
  color: #4078f2;
}
.meta.selector {
  color: #a626a4;
}
.meta.separator {
  background-color: #373b41;
  color: #383a42;
}
.meta.tag {
  color: #383a42;
}
.underline {
  text-decoration: underline;
}
.none {
  color: #383a42;
}
.invalid.deprecated {
  color: #000000 !important;
  background-color: #f2a60d !important;
}
.invalid.illegal {
  color: #ffffff !important;
  background-color: #ff1414 !important;
}
.markup.bold {
  color: #986801;
  font-weight: bold;
}
.markup.changed {
  color: #a626a4;
}
.markup.deleted {
  color: #e45649;
}
.markup.italic {
  color: #a626a4;
  font-style: italic;
}
.markup.heading {
  color: #e45649;
}
.markup.heading .punctuation.definition.heading {
  color: #4078f2;
}
.markup.link {
  color: #a626a4;
}
.markup.inserted {
  color: #50a14f;
}
.markup.quote {
  color: #986801;
}
.markup.raw {
  color: #50a14f;
}
.source.c .keyword.operator {
  color: #a626a4;
}
.source.cpp .keyword.operator {
  color: #a626a4;
}
.source.cs .keyword.operator {
  color: #a626a4;
}
.source.css .property-name,
.source.css .property-value {
  color: #696c77;
}
.source.css .property-name.support,
.source.css .property-value.support {
  color: #383a42;
}
.source.gfm .markup {
  -webkit-font-smoothing: auto;
}
.source.gfm .link .entity {
  color: #4078f2;
}
.source.go .storage.type.string {
  color: #a626a4;
}
.source.ini .keyword.other.definition.ini {
  color: #e45649;
}
.source.java .storage.modifier.import {
  color: #c18401;
}
.source.java .storage.type {
  color: #c18401;
}
.source.java .keyword.operator.instanceof {
  color: #a626a4;
}
.source.java-properties .meta.key-pair {
  color: #e45649;
}
.source.java-properties .meta.key-pair > .punctuation {
  color: #383a42;
}
.source.js .keyword.operator {
  color: #0184bc;
}
.source.js .keyword.operator.delete,
.source.js .keyword.operator.in,
.source.js .keyword.operator.of,
.source.js .keyword.operator.instanceof,
.source.js .keyword.operator.new,
.source.js .keyword.operator.typeof,
.source.js .keyword.operator.void {
  color: #a626a4;
}
.source.json .meta.structure.dictionary.json > .string.quoted.json {
  color: #e45649;
}
.source.json .meta.structure.dictionary.json > .string.quoted.json > .punctuation.string {
  color: #e45649;
}
.source.json .meta.structure.dictionary.json > .value.json > .string.quoted.json,
.source.json .meta.structure.array.json > .value.json > .string.quoted.json,
.source.json .meta.structure.dictionary.json > .value.json > .string.quoted.json > .punctuation,
.source.json .meta.structure.array.json > .value.json > .string.quoted.json > .punctuation {
  color: #50a14f;
}
.source.json .meta.structure.dictionary.json > .constant.language.json,
.source.json .meta.structure.array.json > .constant.language.json {
  color: #0184bc;
}
.source.ruby .constant.other.symbol > .punctuation {
  color: inherit;
}
.source.python .keyword.operator.logical.python {
  color: #a626a4;
}
.source.python .variable.parameter {
  color: #986801;
}
</style>
  </head>
  <body class='markdown-preview' data-use-github-style><h1 id="openstreetmap-case-study-for-manhattan-ny-usa">OpenStreetMap Case Study for Manhattan, NY, USA</h1>
<p>For this project, I&#39;ve chosen to take a look at the island I&#39;ve been living on for the past eight years: New York County, NY, otherwise known as Manhattan.</p>
<p><img src="C:\Users\psamtik071_UNIT02\Google Drive\Projects\Udacity\DA_Nanodegree_Projects\P3\PROJECT\Cover.jpg" alt="OpenStreetMap Export Tool bounding box"></p>
<p>Manhattan is at once recognizable and constantly changing. It is the most densely populated island in the United States and is a world unto itself.</p>
<p>I extracted map data by using <a href="https://www.openstreetmap.org/export#map=12/40.7674/-73.9394">OpenStreetMap&#39;s Export Tool</a> to manually create a box to be downloaded with Overpass</p>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>(node(40.6983,&nbsp;-74.0242,&nbsp;40.8816,&nbsp;-73.9054);&lt;;);</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;out&nbsp;meta;</span></span></span></div></pre><p>then I saved the file as <code>manhattan_new-york.osm</code>. The limitations of a bounding box prevent me from selecting Manhattan by itself, so bits of the Bronx, Brooklyn, Queens, and New Jersey are going to be included. I will take note of this when I make some of my SQL queries.</p>
<h2 id="initial-issues-with-map-data">Initial Issues with Map Data</h2>
<p>While I was auditing the data with <code>audit.py</code>, I noticed the following anomalies:</p>
<ul>
<li>Misspelling of common street names, like <code>steet</code> for <code>Street</code> or <code>Avene</code> for <code>Avenue</code>.</li>
<li>Some street names contain whole addresses.</li>
<li>The use of alternative street names, most notably <code>Avenue of the Americas</code> for <code>6th Avenue</code>, or street names like <code>Lafayette</code> instead of <code>Lafayette Street</code>.</li>
<li>Nine digit zip codes like <code>10001-2062</code> and zip codes containing letters like <code>NY 10111</code>.</li>
<li>Invalid zip codes like <code>100014</code>, <code>320</code>, or <code>83</code></li>
</ul>
<h3 id="inconsistent-street-names">Inconsistent Street Names</h3>
<p>Most inconsistencies in street names are rectified by updating the <code>mapping</code> dictionary in <code>audit.py</code> and applying a simple renaming module (<code>update_name</code> in <code>audit.py</code>):</p>
<pre class="editor-colors lang-python"><div class="line"><span class="source python"><span class="meta function python"><span class="storage type function python"><span>def</span></span><span>&nbsp;</span><span class="entity name function python"><span>update_name</span></span><span class="punctuation definition parameters begin python"><span>(</span></span><span class="meta function parameters python"><span class="variable parameter function python"><span>name</span></span><span class="punctuation separator parameters python"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function python"><span>mapping</span></span></span><span class="punctuation definition parameters end python"><span>)</span></span><span class="punctuation section function begin python"><span>:</span></span></span></span></div><div class="line"><span class="source python"><span class="punctuation whitespace comment leading python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign python"><span class="punctuation definition comment python"><span>#</span></span><span>&nbsp;update&nbsp;street&nbsp;name&nbsp;if&nbsp;the&nbsp;last&nbsp;word&nbsp;is&nbsp;in&nbsp;the&nbsp;mapping&nbsp;dictionary</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>word_list</span><span>&nbsp;</span><span class="keyword operator assignment python"><span>=</span></span><span>&nbsp;</span><span class="meta function-call python"><span>name</span><span>.</span><span>split</span><span class="punctuation definition arguments begin python"><span>(</span></span><span class="punctuation definition arguments end python"><span>)</span></span></span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control conditional python"><span>if</span></span><span>&nbsp;</span><span class="meta item-access python"><span>word_list</span><span class="punctuation definition arguments begin python"><span>[</span></span><span class="meta item-access arguments python"><span class="keyword operator arithmetic python"><span>-</span></span><span class="constant numeric integer decimal python"><span>1</span></span></span><span class="punctuation definition arguments end python"><span>]</span></span></span><span>&nbsp;</span><span class="keyword operator logical python"><span>in</span></span><span>&nbsp;</span><span>mapping</span><span>:</span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta item-access python"><span>word_list</span><span class="punctuation definition arguments begin python"><span>[</span></span><span class="meta item-access arguments python"><span class="keyword operator arithmetic python"><span>-</span></span><span class="constant numeric integer decimal python"><span>1</span></span></span><span class="punctuation definition arguments end python"><span>]</span></span></span><span>&nbsp;</span><span class="keyword operator assignment python"><span>=</span></span><span>&nbsp;</span><span class="meta item-access python"><span>mapping</span><span class="punctuation definition arguments begin python"><span>[</span></span><span class="meta item-access arguments python"><span class="meta item-access python"><span>word_list</span><span class="punctuation definition arguments begin python"><span>[</span></span><span class="meta item-access arguments python"><span class="keyword operator arithmetic python"><span>-</span></span><span class="constant numeric integer decimal python"><span>1</span></span></span><span class="punctuation definition arguments end python"><span>]</span></span></span></span><span class="punctuation definition arguments end python"><span>]</span></span></span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>name</span><span>&nbsp;</span><span class="keyword operator assignment python"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>&nbsp;</span><span class="punctuation definition string end python"><span>&#39;</span></span></span><span>.</span><span class="meta function-call python"><span>j</span><span>oin</span><span class="punctuation definition arguments begin python"><span>(</span></span><span class="meta function-call arguments python"><span>word_list</span></span><span class="punctuation definition arguments end python"><span>)</span></span></span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control statement python"><span>return</span></span><span>&nbsp;</span><span>name</span></span></div></pre>
<p>However, some street names are actually inputted as whole addresses like the following:</p>
<pre class="editor-colors lang-python"><div class="line"><span class="source python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>10024</span><span class="punctuation definition string end python"><span>&#39;</span></span></span><span>:&nbsp;</span><span class="meta function-call python"><span class="support function builtin python"><span>set</span></span><span class="punctuation definition arguments begin python"><span>(</span></span><span class="meta function-call arguments python"><span class="meta structure list python"><span class="punctuation definition list begin python"><span>[</span></span><span class="meta structure list item python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>West&nbsp;80th&nbsp;Street&nbsp;NYC&nbsp;10024</span><span class="punctuation definition string end python"><span>&#39;</span></span></span></span><span class="punctuation definition list end python"><span>]</span></span></span></span><span class="punctuation definition arguments end python"><span>)</span></span></span><span>,</span></span></div><div class="line"><span class="source python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>NY</span><span class="punctuation definition string end python"><span>&#39;</span></span></span><span>:&nbsp;</span><span class="meta function-call python"><span class="support function builtin python"><span>set</span></span><span class="punctuation definition arguments begin python"><span>(</span></span><span class="meta function-call arguments python"><span class="meta structure list python"><span class="punctuation definition list begin python"><span>[</span></span><span class="meta structure list item python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>405&nbsp;West&nbsp;23rd&nbsp;Street,&nbsp;New&nbsp;York,&nbsp;NY</span><span class="punctuation definition string end python"><span>&#39;</span></span></span></span><span class="punctuation separator list python"><span>,</span></span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source python"><span class="meta function-call python"><span class="meta function-call arguments python"><span class="meta structure list python"><span class="meta structure list item python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>54th&nbsp;W&nbsp;39th&nbsp;St&nbsp;New&nbsp;York,&nbsp;NY</span><span class="punctuation definition string end python"><span>&#39;</span></span></span></span><span class="punctuation separator list python"><span>,</span></span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source python"><span class="meta function-call python"><span class="meta function-call arguments python"><span class="meta structure list python"><span class="meta structure list item python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>West&nbsp;49th&nbsp;Street&nbsp;New&nbsp;York&nbsp;NY</span><span class="punctuation definition string end python"><span>&#39;</span></span></span></span><span class="punctuation definition list end python"><span>]</span></span></span></span><span class="punctuation definition arguments end python"><span>)</span></span></span><span>,</span></span></div><div class="line"><span class="source python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>USA</span><span class="punctuation definition string end python"><span>&#39;</span></span></span><span>:&nbsp;</span><span class="meta function-call python"><span class="support function builtin python"><span>set</span></span><span class="punctuation definition arguments begin python"><span>(</span></span><span class="meta function-call arguments python"><span class="meta structure list python"><span class="punctuation definition list begin python"><span>[</span></span><span class="meta structure list item python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>424&nbsp;5th&nbsp;Avenue,&nbsp;10018&nbsp;NY,&nbsp;USA</span><span class="punctuation definition string end python"><span>&#39;</span></span></span></span><span class="punctuation definition list end python"><span>]</span></span></span></span><span class="punctuation definition arguments end python"><span>)</span></span></span><span>,</span></span></div><div class="line"><span class="source python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>Unidos</span><span class="punctuation definition string end python"><span>&#39;</span></span></span><span>:&nbsp;</span><span class="meta function-call python"><span class="support function builtin python"><span>set</span></span><span class="punctuation definition arguments begin python"><span>(</span></span><span class="meta function-call arguments python"><span class="meta structure list python"><span class="punctuation definition list begin python"><span>[</span></span><span class="meta structure list item python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>519&nbsp;9th&nbsp;Ave,&nbsp;New&nbsp;York,&nbsp;NY&nbsp;10018,&nbsp;Estados&nbsp;Unidos</span><span class="punctuation definition string end python"><span>&#39;</span></span></span></span><span class="punctuation definition list end python"><span>]</span></span></span></span><span class="punctuation definition arguments end python"><span>)</span></span></span><span>,</span></span></div><div class="line"><span class="source python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>Uniti</span><span class="punctuation definition string end python"><span>&#39;</span></span></span><span>:&nbsp;</span><span class="meta function-call python"><span class="support function builtin python"><span>set</span></span><span class="punctuation definition arguments begin python"><span>(</span></span><span class="meta function-call arguments python"><span class="meta structure list python"><span class="punctuation definition list begin python"><span>[</span></span><span class="meta structure list item python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>3rd&nbsp;Ave,&nbsp;New&nbsp;York,&nbsp;NY&nbsp;10028,&nbsp;Stati&nbsp;Uniti</span><span class="punctuation definition string end python"><span>&#39;</span></span></span></span><span class="punctuation definition list end python"><span>]</span></span></span></span><span class="punctuation definition arguments end python"><span>)</span></span></span></span></div></pre>
<p> There are three different ways these addresses are formatted. The address elements are comma-separated, space-separated with <code>New York</code> after the address, or space-separated with <code>NYC</code> after the address. To extract the address only, we modify the <code>update_name</code> module as follows:</p>
<pre class="editor-colors lang-python"><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control conditional python"><span>elif</span></span><span>&nbsp;</span><span class="meta item-access python"><span>word_list</span><span class="punctuation definition arguments begin python"><span>[</span></span><span class="meta item-access arguments python"><span class="keyword operator arithmetic python"><span>-</span></span><span class="constant numeric integer decimal python"><span>1</span></span></span><span class="punctuation definition arguments end python"><span>]</span></span></span><span>&nbsp;</span><span class="keyword operator comparison python"><span>==</span></span><span>&nbsp;</span><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>10024</span><span class="punctuation definition string end python"><span>&#39;</span></span></span><span>:</span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>ind</span><span>&nbsp;</span><span class="keyword operator assignment python"><span>=</span></span><span>&nbsp;</span><span class="meta function-call python"><span>name</span><span>.</span><span>find</span><span class="punctuation definition arguments begin python"><span>(</span></span><span class="meta function-call arguments python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>NYC</span><span class="punctuation definition string end python"><span>&#39;</span></span></span></span><span class="punctuation definition arguments end python"><span>)</span></span></span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control statement python"><span>return</span></span><span>&nbsp;</span><span class="meta item-access python"><span>name</span><span class="punctuation definition arguments begin python"><span>[</span></span><span class="meta item-access arguments python"><span>:</span><span>ind</span><span class="keyword operator arithmetic python"><span>-</span></span><span class="constant numeric integer decimal python"><span>1</span></span></span><span class="punctuation definition arguments end python"><span>]</span></span></span></span></div><div class="line"><span class="source python"><span>&nbsp;</span></span></div><div class="line"><span class="source python"><span class="punctuation whitespace comment leading python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign python"><span class="punctuation definition comment python"><span>#</span></span><span>&nbsp;slice&nbsp;address&nbsp;before&nbsp;&#39;New&nbsp;York&#39;&nbsp;and&nbsp;recursively&nbsp;update&nbsp;the&nbsp;street&nbsp;name</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control conditional python"><span>elif</span></span><span>&nbsp;</span><span class="meta item-access python"><span>word_list</span><span class="punctuation definition arguments begin python"><span>[</span></span><span class="meta item-access arguments python"><span class="keyword operator arithmetic python"><span>-</span></span><span class="constant numeric integer decimal python"><span>1</span></span></span><span class="punctuation definition arguments end python"><span>]</span></span></span><span>&nbsp;</span><span class="keyword operator comparison python"><span>==</span></span><span>&nbsp;</span><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>NY</span><span class="punctuation definition string end python"><span>&#39;</span></span></span><span>:</span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>ind</span><span>&nbsp;</span><span class="keyword operator assignment python"><span>=</span></span><span>&nbsp;</span><span class="meta function-call python"><span>name</span><span>.</span><span>find</span><span class="punctuation definition arguments begin python"><span>(</span></span><span class="meta function-call arguments python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>New&nbsp;York</span><span class="punctuation definition string end python"><span>&#39;</span></span></span></span><span class="punctuation definition arguments end python"><span>)</span></span></span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control statement python"><span>return</span></span><span>&nbsp;</span><span class="meta function-call python"><span>update_name</span><span class="punctuation definition arguments begin python"><span>(</span></span><span class="meta function-call arguments python"><span class="meta item-access python"><span>name</span><span class="punctuation definition arguments begin python"><span>[</span></span><span class="meta item-access arguments python"><span>:</span><span>ind</span><span class="keyword operator arithmetic python"><span>-</span></span><span class="constant numeric integer decimal python"><span>1</span></span></span><span class="punctuation definition arguments end python"><span>]</span></span></span><span>,&nbsp;</span><span>mapping</span></span><span class="punctuation definition arguments end python"><span>)</span></span></span></span></div><div class="line"><span class="source python"><span>&nbsp;</span></span></div><div class="line"><span class="source python"><span class="punctuation whitespace comment leading python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign python"><span class="punctuation definition comment python"><span>#</span></span><span>&nbsp;take&nbsp;the&nbsp;address&nbsp;before&nbsp;first&nbsp;comma&nbsp;and&nbsp;recursively&nbsp;update&nbsp;street&nbsp;name</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control conditional python"><span>elif</span></span><span>&nbsp;</span><span class="meta item-access python"><span>word_list</span><span class="punctuation definition arguments begin python"><span>[</span></span><span class="meta item-access arguments python"><span class="keyword operator arithmetic python"><span>-</span></span><span class="constant numeric integer decimal python"><span>1</span></span></span><span class="punctuation definition arguments end python"><span>]</span></span></span><span>&nbsp;</span><span class="keyword operator logical python"><span>in</span></span><span>&nbsp;</span><span class="meta structure list python"><span class="punctuation definition list begin python"><span>[</span></span><span class="meta structure list item python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>USA</span><span class="punctuation definition string end python"><span>&#39;</span></span></span></span><span class="punctuation separator list python"><span>,</span></span><span>&nbsp;</span><span class="meta structure list item python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>Unidos</span><span class="punctuation definition string end python"><span>&#39;</span></span></span></span><span class="punctuation separator list python"><span>,</span></span><span>&nbsp;</span><span class="meta structure list item python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>Uniti</span><span class="punctuation definition string end python"><span>&#39;</span></span></span></span><span class="punctuation definition list end python"><span>]</span></span></span><span>:</span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>street</span><span>&nbsp;</span><span class="keyword operator assignment python"><span>=</span></span><span>&nbsp;</span><span class="meta function-call python"><span>name</span><span>.</span><span>split</span><span class="punctuation definition arguments begin python"><span>(</span></span><span class="meta function-call arguments python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>,</span><span class="punctuation definition string end python"><span>&#39;</span></span></span></span><span class="punctuation definition arguments end python"><span>)</span></span></span><span class="meta structure list python"><span class="punctuation definition list begin python"><span>[</span></span><span class="meta structure list item python"><span class="constant numeric integer decimal python"><span>0</span></span></span><span class="punctuation definition list end python"><span>]</span></span></span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control statement python"><span>return</span></span><span>&nbsp;</span><span class="meta function-call python"><span>update_name</span><span class="punctuation definition arguments begin python"><span>(</span></span><span class="meta function-call arguments python"><span>street</span><span>,&nbsp;</span><span>mapping</span></span><span class="punctuation definition arguments end python"><span>)</span></span></span></span></div></pre>
<h3 id="inconsistent-zip-codes">Inconsistent Zip Codes</h3>
<p>Things get more interesting with zip codes. Modifying inconsistent zip codes is quite straightforward, as it involves stripping away extraneous characters. A simple <code>try/except</code> snippet in the <code>update_zip</code> module does the trick.</p>
<pre class="editor-colors lang-python"><div class="line"><span class="source python"><span class="meta function python"><span class="storage type function python"><span>def</span></span><span>&nbsp;</span><span class="entity name function python"><span>update_zip</span></span><span class="punctuation definition parameters begin python"><span>(</span></span><span class="meta function parameters python"><span class="variable parameter function python"><span>zip_name</span></span></span><span class="punctuation definition parameters end python"><span>)</span></span><span class="punctuation section function begin python"><span>:</span></span></span></span></div><div class="line"><span class="source python"><span class="punctuation whitespace comment leading python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign python"><span class="punctuation definition comment python"><span>#</span></span><span>&nbsp;returns&nbsp;consistent&nbsp;zip&nbsp;code&nbsp;values</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control exception python"><span>try</span></span><span>:&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign python"><span class="punctuation definition comment python"><span>#</span></span><span>&nbsp;try&nbsp;converting&nbsp;zip&nbsp;code&nbsp;to&nbsp;int</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call python"><span class="support function builtin python"><span>int</span></span><span class="punctuation definition arguments begin python"><span>(</span></span><span class="meta function-call arguments python"><span>zip_name</span></span><span class="punctuation definition arguments end python"><span>)</span></span></span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control exception python"><span>except</span></span><span>&nbsp;</span><span class="support type exception python"><span>ValueError</span></span><span>:&nbsp;</span><span class="comment line number-sign python"><span class="punctuation definition comment python"><span>#</span></span><span>&nbsp;process&nbsp;zip&nbsp;code&nbsp;if&nbsp;it&nbsp;contains&nbsp;non-int&nbsp;values</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control conditional python"><span>if</span></span><span>&nbsp;</span><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>-</span><span class="punctuation definition string end python"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator logical python"><span>in</span></span><span>&nbsp;</span><span>zip_name</span><span>:</span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>betterzip</span><span>&nbsp;</span><span class="keyword operator assignment python"><span>=</span></span><span>&nbsp;</span><span class="meta function-call python"><span>zip_name</span><span>.</span><span>split</span><span class="punctuation definition arguments begin python"><span>(</span></span><span class="meta function-call arguments python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>-</span><span class="punctuation definition string end python"><span>&#39;</span></span></span></span><span class="punctuation definition arguments end python"><span>)</span></span></span><span class="meta structure list python"><span class="punctuation definition list begin python"><span>[</span></span><span class="meta structure list item python"><span class="constant numeric integer decimal python"><span>0</span></span></span><span class="punctuation definition list end python"><span>]</span></span></span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control conditional python"><span>elif</span></span><span>&nbsp;</span><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>NY</span><span class="punctuation definition string end python"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator logical python"><span>in</span></span><span>&nbsp;</span><span>zip_name</span><span>:</span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>betterzip</span><span>&nbsp;</span><span class="keyword operator assignment python"><span>=</span></span><span>&nbsp;</span><span class="meta function-call python"><span>zip_name</span><span>.</span><span>split</span><span class="punctuation definition arguments begin python"><span>(</span></span><span class="punctuation definition arguments end python"><span>)</span></span></span><span class="meta structure list python"><span class="punctuation definition list begin python"><span>[</span></span><span class="meta structure list item python"><span class="keyword operator arithmetic python"><span>-</span></span><span class="constant numeric integer decimal python"><span>1</span></span></span><span class="punctuation definition list end python"><span>]</span></span></span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control statement python"><span>return</span></span><span>&nbsp;</span><span>betterzip</span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control conditional python"><span>else</span></span><span>:&nbsp;</span><span class="comment line number-sign python"><span class="punctuation definition comment python"><span>#</span></span><span>&nbsp;special&nbsp;case</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control conditional python"><span>if</span></span><span>&nbsp;</span><span>zip_name</span><span>&nbsp;</span><span class="keyword operator comparison python"><span>==</span></span><span>&nbsp;</span><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>100014</span><span class="punctuation definition string end python"><span>&#39;</span></span></span><span>:</span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>zip_name</span><span>&nbsp;</span><span class="keyword operator assignment python"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>10014</span><span class="punctuation definition string end python"><span>&#39;</span></span></span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control statement python"><span>return</span></span><span>&nbsp;</span><span>zip_name</span></span></div></pre>
<p> More interesting problems crop up when dealing with invalid zip codes. Besides the obviously mistyped <code>100014</code>, I found three: <code>320</code>, <code>83</code>, <code>97657</code>. Let us examine them more closely.</p>
<p>First I identify the ids where these zip codes appear.  After running a  provisional version of <code>data.py</code> to write the CSV files I imported into the database file <code>opensm-manhattan.db</code>, I used the following SQL query using <code>query.py</code> (Using this <a href="http://www.datacarpentry.org/python-ecology-lesson/08-working-with-sql">resource</a>, I can output SQL queries as Pandas dataframes):</p>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;</span><span class="keyword operator star sql"><span>*</span></span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;(</span><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;</span><span class="keyword operator star sql"><span>*</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;nodes_tags&nbsp;</span><span class="keyword other DML sql"><span>UNION&nbsp;ALL</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;</span><span class="keyword operator star sql"><span>*</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;ways_tags)&nbsp;tags</span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>WHERE</span></span><span>&nbsp;</span><span class="constant other database-name sql"><span>tags</span></span><span>.</span><span class="constant other table-name sql"><span>key</span></span><span>&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>postcode</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>AND</span></span><span>&nbsp;(length(</span><span class="constant other database-name sql"><span>tags</span></span><span>.</span><span class="constant other table-name sql"><span>value</span></span><span>)&nbsp;</span><span class="keyword operator comparison sql"><span>&lt;</span></span><span>&nbsp;</span><span class="constant numeric sql"><span>5</span></span><span>)&nbsp;</span><span class="keyword other DML sql"><span>OR</span></span><span>&nbsp;</span><span class="constant other database-name sql"><span>tags</span></span><span>.</span><span class="constant other table-name sql"><span>value</span></span><span>&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>97657</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span><span>;</span></span></div></pre>
<p>There are 5 unique ids where these problematic zip codes appear.</p>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key&nbsp;&nbsp;value&nbsp;&nbsp;type</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>1950758029&nbsp;&nbsp;postcode&nbsp;&nbsp;&nbsp;&nbsp;320&nbsp;&nbsp;addr</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span><span class="meta paragraph text"><span>184578578&nbsp;&nbsp;postcode&nbsp;&nbsp;&nbsp;&nbsp;320&nbsp;&nbsp;addr</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;188201723&nbsp;&nbsp;postcode&nbsp;&nbsp;97657&nbsp;&nbsp;addr</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;265347580&nbsp;&nbsp;postcode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;83&nbsp;&nbsp;addr</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;278366155&nbsp;&nbsp;postcode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;83&nbsp;&nbsp;addr</span></span></span></div></pre><p>Using the <code>get_specific_element</code> module in <code>sample.py</code>, I can pull up the XML entries for those ids.</p>
<h4 id="zip-codes-320-and-97657-">Zip Codes &quot;320&quot; and &quot;97657&quot;</h4>
<p>Both entries with zip code <code>320</code> have the same basic tags. I&#39;ve only included the relevant subtags.</p>
<pre class="editor-colors lang-xml"><div class="line"><span class="text xml"><span class="meta tag xml"><span class="punctuation definition tag xml"><span>&lt;</span></span><span class="entity name tag localname xml"><span>node</span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>changeset</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>13398343</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>id</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>1950758029</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>lat</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>40.8524674</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>lon</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>-73.9733050</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="text xml"><span class="meta tag xml"><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>timestamp</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>2012-10-07T13:55:53Z</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>uid</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>714008</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>user</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>ubuka0</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>version</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>1</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span class="punctuation definition tag xml"><span>&gt;</span></span></span></span></div><div class="line"><span class="text xml"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag xml"><span class="punctuation definition tag xml"><span>&lt;</span></span><span class="entity name tag localname xml"><span>tag</span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>k</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>addr:postcode</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>v</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>320</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition tag xml"><span>/&gt;</span></span></span></span></div><div class="line"><span class="text xml"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag xml"><span class="punctuation definition tag xml"><span>&lt;</span></span><span class="entity name tag localname xml"><span>tag</span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>k</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>addr:street</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>v</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>Main&nbsp;Street</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition tag xml"><span>/&gt;</span></span></span></span></div><div class="line"><span class="text xml"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag xml"><span class="punctuation definition tag xml"><span>&lt;</span></span><span class="entity name tag localname xml"><span>tag</span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>k</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>name</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>v</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>Fort&nbsp;Lee&nbsp;Public&nbsp;Library</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition tag xml"><span>/&gt;</span></span></span></span></div><div class="line"><span class="text xml"><span class="meta tag xml"><span class="punctuation definition tag xml"><span>&lt;/</span></span><span class="entity name tag localname xml"><span>node</span></span><span class="punctuation definition tag xml"><span>&gt;</span></span></span></span></div></pre>
<p>The <code>name</code> subtag gives it away. The Fort Lee Public Library&#39;s address 320 Main Street, Fort Lee, NJ 07024. It looks like the user inputted <code>320</code> as the zip code instead of the building number by mistake. The correct zip code for this entry should be <code>07024</code>. A special line in <code>update_zip</code> makes the appropriate update.</p>
<p>Similarly, the zip code <code>97657</code> was mistyped. It is supposed to be <code>07657</code>.</p>
<h4 id="zip-code-83-">Zip Code &quot;83&quot;</h4>
<p>In this case, there are two different XML entries, each of which are <code>way</code> tags. Node subtags are suppressed.</p>
<pre class="editor-colors lang-xml"><div class="line"><span class="text xml"><span class="meta tag xml"><span class="punctuation definition tag xml"><span>&lt;</span></span><span class="entity name tag localname xml"><span>way</span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>changeset</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>21017219</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>id</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>265347580</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>timestamp</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>2014-03-10T00:29:09Z</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="text xml"><span class="meta tag xml"><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>uid</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>1764427</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>user</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>lxbarth_nycbuildings</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>version</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>1</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span class="punctuation definition tag xml"><span>&gt;</span></span></span></span></div><div class="line"><span class="text xml"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag xml"><span class="punctuation definition tag xml"><span>&lt;</span></span><span class="entity name tag localname xml"><span>tag</span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>k</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>addr:housenumber</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>v</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>830</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition tag xml"><span>/&gt;</span></span></span></span></div><div class="line"><span class="text xml"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag xml"><span class="punctuation definition tag xml"><span>&lt;</span></span><span class="entity name tag localname xml"><span>tag</span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>k</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>addr:postcode</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>v</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>83</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition tag xml"><span>/&gt;</span></span></span></span></div><div class="line"><span class="text xml"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag xml"><span class="punctuation definition tag xml"><span>&lt;</span></span><span class="entity name tag localname xml"><span>tag</span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>k</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>addr:street</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>v</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>5th&nbsp;Avenue</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition tag xml"><span>/&gt;</span></span></span></span></div><div class="line"><span class="text xml"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag xml"><span class="punctuation definition tag xml"><span>&lt;</span></span><span class="entity name tag localname xml"><span>tag</span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>k</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>building</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>v</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>office</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition tag xml"><span>/&gt;</span></span></span></span></div><div class="line"><span class="text xml"><span class="meta tag xml"><span class="punctuation definition tag xml"><span>&lt;/</span></span><span class="entity name tag localname xml"><span>way</span></span><span class="punctuation definition tag xml"><span>&gt;</span></span></span></span></div><div class="line"><span class="text xml"><span>&nbsp;</span></span></div><div class="line"><span class="text xml"><span class="meta tag xml"><span class="punctuation definition tag xml"><span>&lt;</span></span><span class="entity name tag localname xml"><span>way</span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>changeset</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>41243585</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>id</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>278366155</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>timestamp</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>2016-08-04T17:57:24Z</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="text xml"><span class="meta tag xml"><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>uid</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>40023</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>user</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>ALE!</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>version</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>5</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span class="punctuation definition tag xml"><span>&gt;</span></span></span></span></div><div class="line"><span class="text xml"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag xml"><span class="punctuation definition tag xml"><span>&lt;</span></span><span class="entity name tag localname xml"><span>tag</span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>k</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>addr:housenumber</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>v</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>34</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition tag xml"><span>/&gt;</span></span></span></span></div><div class="line"><span class="text xml"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag xml"><span class="punctuation definition tag xml"><span>&lt;</span></span><span class="entity name tag localname xml"><span>tag</span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>k</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>addr:postcode</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>v</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>83</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition tag xml"><span>/&gt;</span></span></span></span></div><div class="line"><span class="text xml"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag xml"><span class="punctuation definition tag xml"><span>&lt;</span></span><span class="entity name tag localname xml"><span>tag</span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>k</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>addr:street</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>v</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>Central&nbsp;Park&nbsp;North</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition tag xml"><span>/&gt;</span></span></span></span></div><div class="line"><span class="text xml"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag xml"><span class="punctuation definition tag xml"><span>&lt;</span></span><span class="entity name tag localname xml"><span>tag</span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>k</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>name</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name localname xml"><span>v</span></span><span>=</span><span class="string quoted double xml"><span class="punctuation definition string begin xml"><span>&quot;</span></span><span>Dana&nbsp;Discovery&nbsp;Center</span><span class="punctuation definition string end xml"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition tag xml"><span>/&gt;</span></span></span></span></div><div class="line"><span class="text xml"><span class="meta tag xml"><span class="punctuation definition tag xml"><span>&lt;/</span></span><span class="entity name tag localname xml"><span>way</span></span><span class="punctuation definition tag xml"><span>&gt;</span></span></span></span></div></pre>
<p>Curiously, both these addresses are located in Central Park. The first is 830 5th Avenue, which on further inspection is <a href="https://en.wikipedia.org/wiki/Arsenal_(Central_Park)">The Arsenal</a>, whose zip code is 10065. The second is the Charles A. Dana Discovery Center which is located on the North side of Central Park at 10029. Zip codes are difficult to determine for Central Park because it is split up into <a href="http://www.zipmap.net/New_York/New_York_County.htm">10 different zip code zones</a>.</p>
<p><img src="C:\Users\psamtik071_UNIT02\Google Drive\Projects\Udacity\DA_Nanodegree_Projects\P3\PROJECT\CP.jpg" alt="Central Park Zip Zones"></p>
<p>Updating these zip codes involves modifying the <code>shape_element</code> module within <code>data.py</code>:</p>
<pre class="editor-colors lang-python"><div class="line"><span class="source python"><span class="comment line number-sign python"><span class="punctuation definition comment python"><span>#</span></span><span>&nbsp;special&nbsp;case:&nbsp;update&nbsp;postal&nbsp;code&nbsp;&#39;83&#39;&nbsp;to&nbsp;correct&nbsp;postal&nbsp;codes</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source python"><span>id_zips</span><span>&nbsp;</span><span class="keyword operator assignment python"><span>=</span></span><span>&nbsp;</span><span class="meta structure dictionary python"><span class="punctuation definition dictionary begin python"><span>{</span></span><span class="meta structure dictionary key python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>265347580</span><span class="punctuation definition string end python"><span>&#39;</span></span></span></span><span class="punctuation separator valuepair dictionary python"><span>:</span></span><span class="meta structure dictionary value python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>10065</span><span class="punctuation definition string end python"><span>&#39;</span></span></span></span><span class="punctuation separator dictionary python"><span>,</span></span><span>&nbsp;</span><span class="meta structure dictionary key python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>278366155</span><span class="punctuation definition string end python"><span>&#39;</span></span></span></span><span class="punctuation separator valuepair dictionary python"><span>:</span></span><span class="meta structure dictionary value python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>10029</span><span class="punctuation definition string end python"><span>&#39;</span></span></span></span><span class="punctuation definition dictionary end python"><span>}</span></span></span></span></div><div class="line"><span class="source python"><span class="keyword control repeat python"><span>for</span></span><span>&nbsp;</span><span>id_</span><span>,&nbsp;</span><span>zip_</span><span>&nbsp;</span><span class="keyword operator logical python"><span>in</span></span><span>&nbsp;</span><span class="meta function-call python"><span>id_zips</span><span>.</span><span>items</span><span class="punctuation definition arguments begin python"><span>(</span></span><span class="punctuation definition arguments end python"><span>)</span></span></span><span>:</span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control conditional python"><span>if</span></span><span>&nbsp;</span><span class="meta item-access python"><span>way_attribs</span><span class="punctuation definition arguments begin python"><span>[</span></span><span class="meta item-access arguments python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>id</span><span class="punctuation definition string end python"><span>&#39;</span></span></span></span><span class="punctuation definition arguments end python"><span>]</span></span></span><span>&nbsp;</span><span class="keyword operator comparison python"><span>==</span></span><span>&nbsp;</span><span>id_</span><span>:</span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control repeat python"><span>for</span></span><span>&nbsp;</span><span>tag</span><span>&nbsp;</span><span class="keyword operator logical python"><span>in</span></span><span>&nbsp;</span><span>tags</span><span>:</span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control conditional python"><span>if</span></span><span>&nbsp;</span><span class="meta item-access python"><span>tag</span><span class="punctuation definition arguments begin python"><span>[</span></span><span class="meta item-access arguments python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>key</span><span class="punctuation definition string end python"><span>&#39;</span></span></span></span><span class="punctuation definition arguments end python"><span>]</span></span></span><span>&nbsp;</span><span class="keyword operator comparison python"><span>==</span></span><span>&nbsp;</span><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>postcode</span><span class="punctuation definition string end python"><span>&#39;</span></span></span><span>:</span></span></div><div class="line"><span class="source python"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta item-access python"><span>tag</span><span class="punctuation definition arguments begin python"><span>[</span></span><span class="meta item-access arguments python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>value</span><span class="punctuation definition string end python"><span>&#39;</span></span></span></span><span class="punctuation definition arguments end python"><span>]</span></span></span><span>&nbsp;</span><span class="keyword operator assignment python"><span>=</span></span><span>&nbsp;</span><span>zip_</span></span></div></pre>
<p>There are many other places where the data have potential problems, including inconsistent city names, redundant keys for secondary tags, incomplete addresses (including the lack of zip codes for certain addresses), but as far as the street addresses and zip codes available are concerned, our dataset is now cleaned.</p>
<h2 id="database-overview">Database Overview</h2>
<p>Here are some basic SQL queries and their results regarding the dataset.</p>
<h3 id="database-size">Database size</h3>
<h4 id="file-sizes">File sizes</h4>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>manhattan_new-york.osm&nbsp;&nbsp;&nbsp;&nbsp;297&nbsp;MB</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>opensm-manhattan.db&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172&nbsp;MB</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>nodes.csv&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;100&nbsp;MB</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>nodes_tags.csv&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.99&nbsp;MB</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>ways.csv&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11.8&nbsp;MB</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>ways_nodes.csv&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;36.9&nbsp;MB</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>ways_tags.csv&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;31.9&nbsp;MB</span></span></span></div></pre><h4 id="number-of-nodes-and-ways">Number of nodes and ways</h4>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;</span><span class="support function aggregate sql"><span>count</span></span><span>(</span><span class="keyword operator star sql"><span>*</span></span><span>)&nbsp;</span><span class="keyword other alias sql"><span>AS</span></span><span>&nbsp;numNodes&nbsp;</span><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;nodes;</span></span></div></pre>
<p><code>numNodes = 1157859</code></p>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;</span><span class="support function aggregate sql"><span>count</span></span><span>(</span><span class="keyword operator star sql"><span>*</span></span><span>)&nbsp;</span><span class="keyword other alias sql"><span>AS</span></span><span>&nbsp;numWays&nbsp;</span><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;ways;</span></span></div></pre>
<p><code>numWays = 186029</code></p>
<h4 id="number-of-node-and-way-tags">Number of node and way tags</h4>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;</span><span class="support function aggregate sql"><span>count</span></span><span>(</span><span class="keyword operator star sql"><span>*</span></span><span>)&nbsp;</span><span class="keyword other alias sql"><span>AS</span></span><span>&nbsp;numNodes_tags&nbsp;</span><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;nodes_tags;</span></span></div></pre>
<p><code>numNodes_tags = 232691</code></p>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;</span><span class="support function aggregate sql"><span>count</span></span><span>(</span><span class="keyword operator star sql"><span>*</span></span><span>)&nbsp;</span><span class="keyword other alias sql"><span>AS</span></span><span>&nbsp;numWays_tags&nbsp;</span><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;ways_tags;</span></span></div></pre>
<p><code>numWays_tags = 1017504</code></p>
<h3 id="user-statistics">User statistics</h3>
<h4 id="number-of-unique-users">Number of unique users</h4>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;</span><span class="support function aggregate sql"><span>count</span></span><span>(distinct(</span><span class="constant other database-name sql"><span>a</span></span><span>.</span><span class="constant other table-name sql"><span>uid</span></span><span>))&nbsp;</span><span class="keyword other alias sql"><span>AS</span></span><span>&nbsp;numUsers</span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;(</span><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;uid&nbsp;</span><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;nodes&nbsp;</span><span class="keyword other DML sql"><span>UNION&nbsp;ALL</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;uid&nbsp;</span><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;ways)&nbsp;a;</span></span></div></pre>
<p><code>numUsers = 1785</code></p>
<h4 id="top-10-users-by-contribution">Top 10 users by contribution</h4>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;</span><span class="constant other database-name sql"><span>a</span></span><span>.</span><span class="constant other table-name sql"><span>user</span></span><span>,&nbsp;</span><span class="support function aggregate sql"><span>count</span></span><span>(</span><span class="keyword operator star sql"><span>*</span></span><span>)&nbsp;</span><span class="keyword other alias sql"><span>AS</span></span><span>&nbsp;num</span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;(</span><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;user&nbsp;</span><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;nodes&nbsp;</span><span class="keyword other DML sql"><span>UNION&nbsp;ALL</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;user&nbsp;</span><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;ways)&nbsp;a</span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>GROUP&nbsp;BY</span></span><span>&nbsp;</span><span class="constant numeric sql"><span>1</span></span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>ORDER&nbsp;BY</span></span><span>&nbsp;</span><span class="constant numeric sql"><span>2</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>DESC</span></span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>LIMIT</span></span><span>&nbsp;</span><span class="constant numeric sql"><span>10</span></span><span>;</span></span></div></pre>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rub21_nycbuildings&nbsp;&nbsp;882162</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>1&nbsp;&nbsp;&nbsp;lxbarth_nycbuildings&nbsp;&nbsp;&nbsp;76303</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;robgeb&nbsp;&nbsp;&nbsp;65948</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minewman&nbsp;&nbsp;&nbsp;44980</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Korzun&nbsp;&nbsp;&nbsp;27747</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mikercpc&nbsp;&nbsp;&nbsp;20699</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;woodpeck_fixbot&nbsp;&nbsp;&nbsp;11348</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>7&nbsp;&nbsp;&nbsp;ingalls_nycbuildings&nbsp;&nbsp;&nbsp;&nbsp;7823</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ALE!&nbsp;&nbsp;&nbsp;&nbsp;7507</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>9&nbsp;&nbsp;LizBarry_nycbuildings&nbsp;&nbsp;&nbsp;&nbsp;7116</span></span></span></div></pre><h4 id="number-of-single-contribution-users">Number of single-contribution users</h4>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;</span><span class="support function aggregate sql"><span>count</span></span><span>(</span><span class="keyword operator star sql"><span>*</span></span><span>)&nbsp;</span><span class="keyword other alias sql"><span>AS</span></span><span>&nbsp;numOnetimeUsers</span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;(</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;</span><span class="constant other database-name sql"><span>a</span></span><span>.</span><span class="constant other table-name sql"><span>user</span></span><span>,&nbsp;</span><span class="support function aggregate sql"><span>count</span></span><span>(</span><span class="keyword operator star sql"><span>*</span></span><span>)&nbsp;</span><span class="keyword other alias sql"><span>AS</span></span><span>&nbsp;num</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;(</span><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;user&nbsp;</span><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;nodes&nbsp;</span><span class="keyword other DML sql"><span>UNION&nbsp;ALL</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;user&nbsp;</span><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;ways)&nbsp;a</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DML sql"><span>GROUP&nbsp;BY</span></span><span>&nbsp;</span><span class="constant numeric sql"><span>1</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DML sql"><span>HAVING</span></span><span>&nbsp;num</span><span class="keyword operator comparison sql"><span>=</span></span><span class="constant numeric sql"><span>1</span></span><span>)&nbsp;u;</span></span></div></pre>
<p><code>numOnetimeUsers = 585</code></p>
<p>It is noteworthy to point out that four of the top ten users have <code>_nycbuildings</code> in their username, and that the top user has more than ten times the number of submissions compared to the next highest contributor.</p>
<p>Here are some other user statistics:</p>
<ul>
<li>Top user <code>Rub21_nycbuildings</code> contributed 65.6% of total submissions</li>
<li>The top 10 users contributed 85.7% of total submissions</li>
<li>The average number of submissions is 753 and the median is 3</li>
<li>If we remove the top 10 contributors, the average contribution drops to 108</li>
<li>The interquartile percentiles are:<ul>
<li>25%: 1 submission</li>
<li>50%: 3 submissions</li>
<li>75%: 16 submissions</li>
</ul>
</li>
<li>Single-contribution users as a percentage of total users: 32.8%</li>
</ul>
<h2 id="database-exploration">Database Exploration</h2>
<p>Let us take a closer look at the node and way tag data.
Some of these queries are adapted from <a href="https://gist.github.com/carlward/54ec1c91b62a5f911c42#file-sample_project-md">carlward&#39;s sample SQL OpenStreetMap project exploring Charlotte, NC</a>.</p>
<h4 id="number-of-zip-code-tags">Number of zip code tags</h4>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;</span><span class="support function aggregate sql"><span>COUNT</span></span><span>(</span><span class="constant other database-name sql"><span>a</span></span><span>.</span><span class="constant other table-name sql"><span>value</span></span><span>)&nbsp;</span><span class="keyword other alias sql"><span>AS</span></span><span>&nbsp;total_postalTags</span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;(</span><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;</span><span class="keyword operator star sql"><span>*</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;nodes_tags&nbsp;</span><span class="keyword other DML sql"><span>UNION&nbsp;ALL</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;</span><span class="keyword operator star sql"><span>*</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;ways_tags)&nbsp;a</span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>WHERE</span></span><span>&nbsp;</span><span class="constant other database-name sql"><span>a</span></span><span>.</span><span class="constant other table-name sql"><span>key</span></span><span>&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>postcode</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span><span>;</span></span></div></pre>
<p><code>total_postalTags = 150770</code></p>
<h4 id="number-of-zip-code-tags-by-borough-including-new-jersey-">Number of zip code tags by borough (including New Jersey)</h4>
<p>Here&#39;s a breakdown of zip codes by borough that we will need to incorporate in order to make the appropriate groupings:</p>
<ul>
<li>Manhattan: 100XX, 101XX, or 102XX</li>
<li>Brooklyn: 112XX</li>
<li>Bronx: 104XX and Riker&#39;s Island (11370). Bronx also includes parts of 10705, but that is not in our map area</li>
<li>Queens:<ul>
<li>113XX (not including 11370), 114XX, and 116XX</li>
<li>11004 and 11005</li>
<li>parts of 11040 and 11001, but those are not included in our map area</li>
</ul>
</li>
<li>New Jersey: begins with 07XXX</li>
</ul>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;</span><span class="keyword other case sql"><span>CASE</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other case sql"><span>WHEN</span></span><span>&nbsp;(</span><span class="constant other database-name sql"><span>a</span></span><span>.</span><span class="constant other table-name sql"><span>value</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>BETWEEN</span></span><span>&nbsp;</span><span class="constant numeric sql"><span>10000</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>AND</span></span><span>&nbsp;</span><span class="constant numeric sql"><span>10299</span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other case sql"><span>THEN</span></span><span>&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>manhattan</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other case sql"><span>WHEN</span></span><span>&nbsp;(</span><span class="constant other database-name sql"><span>a</span></span><span>.</span><span class="constant other table-name sql"><span>value</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>LIKE</span></span><span>&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>112%</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other case sql"><span>THEN</span></span><span>&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>brooklyn</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other case sql"><span>WHEN</span></span><span>&nbsp;(</span><span class="constant other database-name sql"><span>a</span></span><span>.</span><span class="constant other table-name sql"><span>value</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>LIKE</span></span><span>&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>104%</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>OR</span></span><span>&nbsp;</span><span class="constant other database-name sql"><span>a</span></span><span>.</span><span class="constant other table-name sql"><span>value</span></span><span>&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>11370</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other case sql"><span>THEN</span></span><span>&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>bronx</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other case sql"><span>WHEN</span></span><span>&nbsp;(</span><span class="constant other database-name sql"><span>a</span></span><span>.</span><span class="constant other table-name sql"><span>value</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>LIKE</span></span><span>&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>07%</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other case sql"><span>THEN</span></span><span>&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>nj</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other case sql"><span>WHEN</span></span><span>&nbsp;(</span><span class="constant other database-name sql"><span>a</span></span><span>.</span><span class="constant other table-name sql"><span>value</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>LIKE</span></span><span>&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>111%</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DML sql"><span>OR</span></span><span>&nbsp;&nbsp;&nbsp;(</span><span class="constant other database-name sql"><span>a</span></span><span>.</span><span class="constant other table-name sql"><span>value</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>LIKE</span></span><span>&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>113%</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>AND</span></span><span>&nbsp;</span><span class="constant other database-name sql"><span>a</span></span><span>.</span><span class="constant other table-name sql"><span>value</span></span><span>&nbsp;</span><span class="keyword operator comparison sql"><span>!=</span></span><span>&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>11370</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DML sql"><span>OR</span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="constant other database-name sql"><span>a</span></span><span>.</span><span class="constant other table-name sql"><span>value</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>LIKE</span></span><span>&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>114%</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DML sql"><span>OR</span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="constant other database-name sql"><span>a</span></span><span>.</span><span class="constant other table-name sql"><span>value</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>LIKE</span></span><span>&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>116%</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DML sql"><span>OR</span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="constant other database-name sql"><span>a</span></span><span>.</span><span class="constant other table-name sql"><span>value</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>between</span></span><span>&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>11004</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>AND</span></span><span>&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>11005</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span><span>)</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other case sql"><span>THEN</span></span><span>&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>queens</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other case sql"><span>END</span></span><span>&nbsp;</span><span class="keyword other alias sql"><span>as</span></span><span>&nbsp;borough,</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function aggregate sql"><span>COUNT</span></span><span>(</span><span class="constant other database-name sql"><span>a</span></span><span>.</span><span class="constant other table-name sql"><span>value</span></span><span>)&nbsp;</span><span class="keyword other alias sql"><span>AS</span></span><span>&nbsp;numTags</span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;(</span><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;</span><span class="keyword operator star sql"><span>*</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;nodes_tags&nbsp;</span><span class="keyword other DML sql"><span>UNION&nbsp;ALL</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;</span><span class="keyword operator star sql"><span>*</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;ways_tags)&nbsp;a</span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>WHERE</span></span><span>&nbsp;</span><span class="constant other database-name sql"><span>a</span></span><span>.</span><span class="constant other table-name sql"><span>key</span></span><span>&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>postcode</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>GROUP&nbsp;BY</span></span><span>&nbsp;borough</span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>ORDER&nbsp;BY</span></span><span>&nbsp;numTags&nbsp;</span><span class="keyword other order sql"><span>DESC</span></span><span>;</span></span></div></pre>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span>&nbsp;&nbsp;</span><span class="meta paragraph text"><span>borough&nbsp;&nbsp;numTags</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>manhattan&nbsp;&nbsp;&nbsp;&nbsp;59284</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>queens&nbsp;&nbsp;&nbsp;&nbsp;45946</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;</span><span class="meta paragraph text"><span>brooklyn&nbsp;&nbsp;&nbsp;&nbsp;24160</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>bronx&nbsp;&nbsp;&nbsp;&nbsp;21307</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>nj&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;73</span></span></span></div></pre><p>Although Manhattan has the most zip code tags, it only has 13338 more than second-place Queens, whose map area is a fraction of Manhattan&#39;s. Also surprising is a lack of New Jersey zip codes, given its prominence on the map.</p>
<h4 id="top-5-zip-codes">Top 5 zip codes</h4>
<p>Let&#39;s take a look at the individual zip codes themselves:</p>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;</span><span class="constant other database-name sql"><span>a</span></span><span>.</span><span class="constant other table-name sql"><span>value</span></span><span>,&nbsp;</span><span class="support function aggregate sql"><span>count</span></span><span>(</span><span class="keyword operator star sql"><span>*</span></span><span>)&nbsp;</span><span class="keyword other alias sql"><span>as</span></span><span>&nbsp;numTags</span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;(</span><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;</span><span class="keyword operator star sql"><span>*</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;nodes_tags&nbsp;</span><span class="keyword other DML sql"><span>UNION&nbsp;ALL</span></span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;</span><span class="keyword operator star sql"><span>*</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;ways_tags)&nbsp;a</span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>WHERE</span></span><span>&nbsp;</span><span class="constant other database-name sql"><span>a</span></span><span>.</span><span class="constant other table-name sql"><span>key</span></span><span>&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>postcode</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>GROUP&nbsp;BY</span></span><span>&nbsp;</span><span class="constant numeric sql"><span>1</span></span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>ORDER&nbsp;BY</span></span><span>&nbsp;</span><span class="constant numeric sql"><span>2</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>DESC</span></span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>LIMIT</span></span><span>&nbsp;</span><span class="constant numeric sql"><span>5</span></span><span>;</span></span></div></pre>
<p>I have edited the output to include a column of neighborhood names that approximately corresponds to each of the zip codes.</p>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span>&nbsp;&nbsp;</span><span class="meta paragraph text"><span>value&nbsp;&nbsp;neighborhood&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numTags</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>0&nbsp;11377&nbsp;&nbsp;Woodside,&nbsp;Queens&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8375</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>1&nbsp;11385&nbsp;&nbsp;Ridgewood,&nbsp;Queens&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7555</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>2&nbsp;11211&nbsp;&nbsp;Williamsburg,&nbsp;Brooklyn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6380</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>3&nbsp;11222&nbsp;&nbsp;Greenpoint,&nbsp;Brooklyn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6120</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>4&nbsp;11105&nbsp;&nbsp;Ditmars,&nbsp;Queens&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5947</span></span></span></div></pre><p>It is surprising that these are all locations in outer boroughs. These tend to be densely populated residential areas which are larger than the average Manhattan zip code zone. Also, since I included ways, many of the them may have originated in these residential neighborhoods.</p>
<p>Restricting our view to node tags reveals the following result:</p>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>value&nbsp;&nbsp;neighborhood&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numTags</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>0&nbsp;&nbsp;11101&nbsp;&nbsp;Long&nbsp;Island&nbsp;City,&nbsp;Queens&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1823</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>1&nbsp;&nbsp;11211&nbsp;&nbsp;Williamsburg,&nbsp;Brooklyn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1721</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>2&nbsp;&nbsp;11222&nbsp;&nbsp;Greenpoint,&nbsp;Brooklyn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1539</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>3&nbsp;&nbsp;11206&nbsp;&nbsp;Broadway&nbsp;Triangle/Sumner&nbsp;Houses,&nbsp;Brooklyn&nbsp;&nbsp;&nbsp;1376</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>4&nbsp;&nbsp;11377&nbsp;&nbsp;Woodside,&nbsp;Queens&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1340</span></span></span></div></pre><h4 id="top-5-manhattan-zip-codes-nodes-">Top 5 Manhattan zip codes (nodes)</h4>
<p>The SQL code is similar except for a</p>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>AND</span></span><span>&nbsp;(</span><span class="constant other database-name sql"><span>a</span></span><span>.</span><span class="constant other table-name sql"><span>value</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>BETWEEN</span></span><span>&nbsp;</span><span class="constant numeric sql"><span>10000</span></span><span>&nbsp;</span><span class="keyword other DML sql"><span>AND</span></span><span>&nbsp;</span><span class="constant numeric sql"><span>10299</span></span><span>)</span></span></div></pre>
<p>under the <code>WHERE</code> line. Again, I translate the zip codes into approximate neighborhoods:</p>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>value&nbsp;&nbsp;neighbohood&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numTags</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>0&nbsp;&nbsp;10025&nbsp;&nbsp;Upper&nbsp;West&nbsp;Side&nbsp;(North)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1157</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>1&nbsp;&nbsp;10002&nbsp;&nbsp;Lower&nbsp;East&nbsp;Side/Chinatown&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1132</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>2&nbsp;&nbsp;10013&nbsp;&nbsp;TriBeCa/Little&nbsp;Italy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1128</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>3&nbsp;&nbsp;10003&nbsp;&nbsp;NOHO/Union&nbsp;Square&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1031</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>4&nbsp;&nbsp;10014&nbsp;&nbsp;Greenwich/West&nbsp;Village&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1022</span></span></span></div></pre><h4 id="top-10-amenities">Top 10 amenities</h4>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;value,&nbsp;</span><span class="support function aggregate sql"><span>COUNT</span></span><span>(</span><span class="keyword operator star sql"><span>*</span></span><span>)&nbsp;</span><span class="keyword other alias sql"><span>as</span></span><span>&nbsp;num</span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;nodes_tags</span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>WHERE</span></span><span>&nbsp;key</span><span class="keyword operator comparison sql"><span>=</span></span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>amenity</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>GROUP&nbsp;BY</span></span><span>&nbsp;</span><span class="constant numeric sql"><span>1</span></span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>ORDER&nbsp;BY</span></span><span>&nbsp;</span><span class="constant numeric sql"><span>2</span></span><span>&nbsp;</span><span class="keyword other order sql"><span>DESC</span></span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>LIMIT</span></span><span>&nbsp;</span><span class="constant numeric sql"><span>10</span></span><span>;</span></span></div></pre>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>value&nbsp;&nbsp;&nbsp;num</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>0&nbsp;&nbsp;&nbsp;bicycle_parking&nbsp;&nbsp;3325</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;restaurant&nbsp;&nbsp;1457</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cafe&nbsp;&nbsp;&nbsp;554</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;school&nbsp;&nbsp;&nbsp;529</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fast_food&nbsp;&nbsp;&nbsp;404</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>5&nbsp;&nbsp;&nbsp;&nbsp;bicycle_rental&nbsp;&nbsp;&nbsp;334</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>6&nbsp;&nbsp;place_of_worship&nbsp;&nbsp;&nbsp;302</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bank&nbsp;&nbsp;&nbsp;285</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bar&nbsp;&nbsp;&nbsp;240</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>9&nbsp;&nbsp;&nbsp;&nbsp;drinking_water&nbsp;&nbsp;&nbsp;233</span></span></span></div></pre><h4 id="bike-racks">Bike racks</h4>
<p>The OSM data suggests that bicycle parking is the most popular amenity in NYC by far. Most of the bicycle parking nodes are submitted by <code>cityracks</code>, so we&#39;re probably looking at public bike racks. Let us take a closer look at them. We use the <code>select</code> module in <code>query.py</code> to create a pandas dataframe from the output of the following SQL query:</p>
<pre class="editor-colors lang-sql"><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>SELECT</span></span><span>&nbsp;value</span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;nodes_tags</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DML sql"><span>JOIN</span></span><span>&nbsp;(</span><span class="keyword other DML sql"><span>SELECT&nbsp;DISTINCT</span></span><span>(id)&nbsp;</span><span class="keyword other DML sql"><span>FROM</span></span><span>&nbsp;nodes_tags</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DML sql"><span>WHERE</span></span><span>&nbsp;value</span><span class="keyword operator comparison sql"><span>=</span></span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>bicycle_parking</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span><span>)&nbsp;i</span></span></div><div class="line"><span class="source sql"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other DDL create II sql"><span>ON</span></span><span>&nbsp;</span><span class="constant other database-name sql"><span>nodes_tags</span></span><span>.</span><span class="constant other table-name sql"><span>id</span></span><span class="keyword operator comparison sql"><span>=</span></span><span class="constant other database-name sql"><span>i</span></span><span>.</span><span class="constant other table-name sql"><span>id</span></span></span></div><div class="line"><span class="source sql"><span class="keyword other DML sql"><span>WHERE</span></span><span>&nbsp;</span><span class="constant other database-name sql"><span>nodes_tags</span></span><span>.</span><span class="constant other table-name sql"><span>key</span></span><span>&nbsp;</span><span class="keyword operator comparison sql"><span>=</span></span><span>&nbsp;</span><span class="string quoted single sql"><span class="punctuation definition string begin sql"><span>&#39;</span></span><span>capacity</span><span class="punctuation definition string end sql"><span>&#39;</span></span></span><span>;</span></span></div></pre>
<pre class="editor-colors lang-python"><div class="line"><span class="source python"><span>df</span><span>&nbsp;</span><span class="keyword operator assignment python"><span>=</span></span><span>&nbsp;</span><span class="meta function-call python"><span>select</span><span class="punctuation definition arguments begin python"><span>(</span></span><span class="meta function-call arguments python"><span class="string quoted single single-line python"><span class="punctuation definition string begin python"><span>&#39;</span></span><span>opensm-manhattan.db</span><span class="punctuation definition string end python"><span>&#39;</span></span></span><span>,&nbsp;</span><span>QUERY_bikerackCaps</span></span><span class="punctuation definition arguments end python"><span>)</span></span></span></span></div><div class="line"><span class="source python"><span class="meta function-call python"><span>df</span><span>.</span><span>apply</span><span class="punctuation definition arguments begin python"><span>(</span></span><span class="meta function-call arguments python"><span>pd</span><span>.</span><span>to_numeric</span></span><span class="punctuation definition arguments end python"><span>)</span></span></span><span>.</span><span class="meta function-call python"><span>d</span><span>escribe</span><span class="punctuation definition arguments begin python"><span>(</span></span><span class="punctuation definition arguments end python"><span>)</span></span></span></span></div></pre>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>value</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>count&nbsp;&nbsp;3276.000000</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>mean&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.537851</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>std&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.291920</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>min&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.000000</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>25%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.000000</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>50%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.000000</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>75%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5.000000</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>max&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;50.000000</span></span></span></div></pre><p>Most of the bicycle racks are small, with a mean capacity between 3 and 4. The largest rack has 50 slots, and about 94% of racks have under 10 slots. Strangely, there are 2 racks with a capacity of 0.</p>
<h2 id="ideas-for-improvement-and-conclusion">Ideas for Improvement and Conclusion</h2>
<p>Just from the zip codes we can tell that the data for Manhattan is incomplete. Not all nodes have addresses and not all addresses have postal codes, so one suggestion is for users to conform to a format for <code>addr</code> tag types where <code>street</code>, <code>state</code> (2 letter abbreviation from a drop-down menu), <code>city</code>, and <code>postcode</code> keys are all mandatory for US locations and where <code>postcode</code> must be a 5-digit number.  The use of <code>addr</code> will still be optional, but all its subkeys will be slaved to the mandatory format once <code>addr</code> is invoked. One way to implement a mandatory form is having an automated auditor like <code>audit.py</code> scan through the submission and either correct inconsistent entries or throw an error message to the user. I agree with <code>carlward</code> that a means of cleaning user data at the source would help with maintaining the integrity data on OpenStreetMap.</p>
<p>However, there will still be room for user error to pass through this standardization system. It would be able to catch problematic zip codes like <code>83</code> or <code>100014</code> but not an erroneous zip code like <code>97657</code>. Perhaps a more sophisticated auditor which takes states into account would work, but again, the user may accidentally choose the wrong state. Many entries are also automatically generated by GPS systems, so inconsistencies are bound to arise from users&#39; efforts to input large quantities of data, especially if they are city workers inputting the locations of New York&#39;s extensive public amenities.</p>
<p>I have only touched on one potential improvement among many that are still required for all of OpenStreetMap&#39;s data to be fully accurate, complete, valid, consistent, and uniform enough for effective data analysis. For the purposes of this exercise however, I believe the data has been well cleaned.</p></body>
</html>
